#### 8.2. 로직 분석기 및 오실로스코프 사용

로직 분석기와 오실로스코프는 임베디드 시스템 개발에서 하드웨어 신호를 분석하고 디버깅하는 데 중요한 도구입니다. 이 두 도구를 사용하여 디지털 및 아날로그 신호의 동작을 실시간으로 확인하고, 시스템의 문제를 해결할 수 있습니다.

##### 로직 분석기

로직 분석기는 디지털 신호를 캡처하고 분석하는 도구입니다. 주로 디지털 회로의 타이밍 문제, 프로토콜 분석, 디지털 신호의 디버깅에 사용됩니다.

**로직 분석기의 주요 특징**:
- **다중 채널**: 여러 개의 디지털 신호를 동시에 캡처하고 분석할 수 있습니다.
- **타이밍 분석**: 신호 간의 시간 관계를 분석하여 타이밍 문제를 해결합니다.
- **프로토콜 디코딩**: SPI, I2C, UART 등 다양한 프로토콜을 디코딩하여 신호를 분석합니다.
- **트리거 기능**: 특정 조건에서 신호 캡처를 시작하여 원하는 이벤트를 정확히 분석할 수 있습니다.

**로직 분석기 사용 예제**:
1. **하드웨어 연결**:
   - 로직 분석기의 프로브를 디지털 신호에 연결합니다.
   - GND(그라운드) 연결을 잊지 말아야 합니다.

2. **소프트웨어 설정**:
   - 로직 분석기 소프트웨어를 실행하고, 캡처할 신호의 채널을 설정합니다.
   - 샘플링 속도와 트리거 조건을 설정합니다.

3. **신호 캡처 및 분석**:
   - 캡처 버튼을 눌러 신호를 캡처합니다.
   - 캡처된 신호를 분석하고, 타이밍 다이어그램과 프로토콜 디코딩을 통해 문제를 해결합니다.

**예제: I2C 신호 분석**:
I2C 통신을 사용하는 임베디드 시스템에서, I2C 신호를 로직 분석기로 캡처하고 분석하는 예제를 설명합니다.

- **하드웨어 연결**:
  - SDA, SCL 핀에 로직 분석기 프로브를 연결합니다.
  - GND 연결을 확인합니다.

- **소프트웨어 설정**:
  - 로직 분석기 소프트웨어에서 I2C 프로토콜 디코더를 선택합니다.
  - SDA, SCL 채널을 설정하고, 샘플링 속도와 트리거 조건을 설정합니다.

- **신호 캡처 및 분석**:
  - 캡처 버튼을 눌러 I2C 신호를 캡처합니다.
  - 캡처된 신호를 분석하고, 데이터 전송의 정확성을 확인합니다.

##### 오실로스코프

오실로스코프는 아날로그 신호를 캡처하고 분석하는 도구입니다. 주로 아날로그 회로의 동작, 전압 변동, 주파수 분석 등에 사용됩니다.

**오실로스코프의 주요 특징**:
- **아날로그 신호 캡처**: 실시간으로 아날로그 신호를 캡처하고, 파형을 시각적으로 확인할 수 있습니다.
- **시간 및 전압 측정**: 신호의 주기, 주파수, 피크 전압 등을 측정할 수 있습니다.
- **트리거 기능**: 특정 조건에서 신호 캡처를 시작하여 원하는 이벤트를 정확히 분석할 수 있습니다.
- **FFT 분석**: 신호의 주파수 성분을 분석하여, 신호의 스펙트럼을 확인할 수 있습니다.

**오실로스코프 사용 예제**:
1. **하드웨어 연결**:
   - 오실로스코프의 프로브를 아날로그 신호에 연결합니다.
   - GND(그라운드) 연결을 확인합니다.

2. **소프트웨어 설정**:
   - 오실로스코프의 시간 축(Timebase)과 전압 축(Voltage Scale)을 설정합니다.
   - 트리거 조건을 설정하여 원하는 이벤트에서 신호 캡처를 시작합니다.

3. **신호 캡처 및 분석**:
   - 캡처 버튼을 눌러 신호를 캡처합니다.
   - 캡처된 신호를 분석하고, 파형을 확인하여 신호의 특성을 파악합니다.

**예제: PWM 신호 분석**:
PWM(Pulse Width Modulation) 신호를 오실로스코프를 사용하여 분석하는 예제를 설명합니다.

- **하드웨어 연결**:
  - PWM 신호 출력 핀에 오실로스코프 프로브를 연결합니다.
  - GND 연결을 확인합니다.

- **소프트웨어 설정**:
  - 오실로스코프의 시간 축을 적절히 설정하여 PWM 주기를 확인할 수 있도록 합니다.
  - 전압 축을 설정하여 PWM 신호의 전압 범위를 확인합니다.
  - 트리거 조건을 설정하여 PWM 신호의 상승 또는 하강 에지에서 캡처를 시작합니다.

- **신호 캡처 및 분석**:
  - 캡처 버튼을 눌러 PWM 신호를 캡처합니다.
  - 캡처된 신호를 분석하여 PWM 주기와 듀티 사이클을 확인합니다.

**오실로스코프 설정 예제**:
```c
void setup() {
    pinMode(9, OUTPUT); // PWM 출력 핀 설정

    // PWM 설정 (아두이노 예제)
    analogWrite(9, 128); // 50% 듀티 사이클
}

void loop() {
    // 아무 작업도 수행하지 않음
}
```

**오실로스코프 분석**:
- 캡처된 PWM 신호에서, 주기와 듀티 사이클을 확인합니다.
- 신호의 특성을 분석하여, 예상한 대로 동작하는지 확인합니다.

##### 로직 분석기와 오실로스코프의 비교

| 특징                 | 로직 분석기                     | 오실로스코프                 |
|----------------------|--------------------------------|-----------------------------|
| **신호 유형**        | 디지털 신호                    | 아날로그 신호               |
| **주요 기능**        | 디지털 신호 캡처 및 분석       | 아날로그 신호 캡처 및 분석  |
| **프로토콜 디코딩**  | 지원 (I2C, SPI, UART 등)       | 지원하지 않음                |
| **트리거 기능**      | 지원                           | 지원                        |
| **주파수 분석**      | 지원하지 않음                  | FFT를 통해 지원             |

로직 분석기와 오실로스코프를 사용하여 임베디드 시스템의 디지털 및 아날로그 신호를 효과적으로 분석할 수 있습니다. 각 도구의 특성과 사용 방법을 잘 이해하고, 프로젝트의 요구에 맞게 적절히 활용하는 것이 중요합니다.
